<?xml version="1.0" encoding="utf-8"?>

<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="KarjalaBasket.Scoreboard.Views.PlayersView"
             x:Name="ContentView">
    
    <CollectionView ItemsSource="{Binding Players, Source={x:Reference ContentView}, Mode=TwoWay}">
        <CollectionView.ItemTemplate>
            <DataTemplate>
                <Grid ColumnSpacing="10" Padding="0, 0, 0,10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                
                    <Entry Grid.Column="0" 
                           Text="{Binding Number, Mode=TwoWay}"
                           VerticalTextAlignment="Center" 
                           HorizontalTextAlignment="Center"
                           MinimumWidthRequest="35"
                           Margin="0"
                           Placeholder="#"/>
                
                    <Entry Grid.Column="1" 
                           HorizontalOptions="Fill" 
                           Text="{Binding Name, Mode=TwoWay}"
                           Placeholder="Введите имя"/>
                
                    <FlexLayout Grid.Column="2" Direction="Row">
                        <Entry Text="{Binding Fouls, Mode=TwoWay}"
                               VerticalTextAlignment="Center" 
                               HorizontalTextAlignment="Center"
                               MinimumWidthRequest="35"
                               Margin="0"/>
                
                        <Stepper Value="{Binding Fouls, Mode=TwoWay}"
                                 Increment="1"
                                 Maximum="5"
                                 Margin="2, 0, 0, 0" />
                    </FlexLayout>
                
                    <FlexLayout Grid.Column="3" Direction="Row" AlignItems="Center" VerticalOptions="Fill">
                        <Entry Text="{Binding Points, Mode=TwoWay}"
                               VerticalTextAlignment="Center" 
                               HorizontalTextAlignment="Center"
                               MinimumWidthRequest="35"
                               Margin="0" />
                
                        <Button ToolTipProperties.Text="Добавить 1 очко"
                                Text="+1"
                                Command="{Binding AddPointsCommand}"
                                CommandParameter="{Binding GameSettings.FreeThrowPoints, Source={x:Reference ContentView}}"
                                Margin="2, 0, 0, 0"
                                BackgroundColor="{StaticResource Gray200}"
                                TextColor="{StaticResource Gray950}"
                                VerticalOptions="Fill"
                                CornerRadius="3" />
                
                        <Button ToolTipProperties.Text="Добавить 2 очка"
                                Text="+2"
                                Command="{Binding AddPointsCommand}"
                                CommandParameter="{Binding GameSettings.MiddleShotPoints, Source={x:Reference ContentView}}"
                                Margin="2, 0, 0, 0"
                                BackgroundColor="{StaticResource Gray200}"
                                TextColor="{StaticResource Gray950}"
                                VerticalOptions="Fill"
                                CornerRadius="3" />
                
                        <Button ToolTipProperties.Text="Добавить 3 очка"
                                Text="+3"
                                Command="{Binding AddPointsCommand}"
                                CommandParameter="{Binding GameSettings.LongShotPoints, Source={x:Reference ContentView}}"
                                Margin="2, 0, 0, 0"
                                BackgroundColor="{StaticResource Gray200}"
                                TextColor="{StaticResource Gray950}"
                                VerticalOptions="Fill"
                                CornerRadius="3" />
                    </FlexLayout>
                </Grid>
            </DataTemplate>
        </CollectionView.ItemTemplate>
        <CollectionView.Footer>
            <ImageButton ToolTipProperties.Text="Добавить игрока"
                         HorizontalOptions="Center"
                         Source="add.png"
                         Command="{Binding AddPlayerCommand, Source={x:Reference ContentView}}"
                         WidthRequest="50"
                         HeightRequest="50"/>
        </CollectionView.Footer>
    </CollectionView>
</ContentView>